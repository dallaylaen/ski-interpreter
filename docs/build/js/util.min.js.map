{
  "version": 3,
  "sources": ["../../../site-src/html-util.js", "../../../site-src/eval-box.js", "../../../site-src/permalink.js", "../../../site-src/store.js", "../../../site-src/smctl.js", "../../../site-src/hamburger.js", "../../../site-src/index.js"],
  "sourcesContent": ["/**\n *   HTML-related utility functions. Poor man's jquery & react.\n */\n\n'use strict';\n\n  /**\n * Locate static element with specific ids and return a hash of them.\n * @param {String} ids\n * @return {{}}\n */\nfunction grabView (...ids) {\n  const view = {};\n  for (const name of ids)\n    view[name] = document.getElementById(name);\n  return view;\n}\n\n/**\n * Attach a child element to the given parent and return the child.\n * @param parent\n * @param type\n * @param {{class: string[]?, content: string?, hidden: boolean?}} options\n * @return {HTMLElement}\n */\nfunction append (parent, type, options = {}) {\n  const child = document.createElement(type);\n  if (options.class)\n    child.classList.add(...options.class);\n  if (options.content !== undefined)\n    child.innerHTML = '' + options.content;\n  if (options.hidden)\n    child.hidden = true;\n  if (options.color)\n    child.style.color = options.color;\n  if (parent)\n    parent.appendChild(child);\n  return child;\n}\n\n/**\n * Traverse a node tree and call func on each node.\n * @param node\n * @param func\n */\nfunction traverse (node, func) {\n  func(node);\n  for (const child of node.childNodes)\n    traverse(child, func);\n}\n\nfunction custom(html) {\n  const gantry = document.createElement('div');\n  gantry.innerHTML = html.replace(/^\\s+|\\s+$/gs, '');\n  if (gantry.childNodes.length !== 1)\n    throw new Error('Custom HTML element must have exactly one root node');\n  const elem = gantry.childNodes[0];\n\n  const out = {};\n  traverse(elem, node => {\n    // extract data-handle attributes\n    const handle = node.getAttribute && node.getAttribute('data-handle');\n    if (!handle)\n      return;\n    if (out[handle])\n      throw new Error(`Duplicate data-handle attribute: ${handle}`);\n    out[handle] = node;\n  });\n  return { ...out, elem };\n}\n\nfunction tpl(name) {\n  // read <script type=\"text/template\" id=\"name\">\n  const script = document.getElementById(name);\n  if (!script)\n    throw new Error(`Template not found: ${name}`);\n  return script.innerHTML;\n}\n\nfunction sanitize (text) {\n  if (typeof text !== 'string')\n    text = '' + text;\n  const escape = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '&': '&amp;',\n  };\n  return text.replace(/[<>&]/g, c => escape[c]);\n}\n\n/**\n * URL encode a string.\n * Forces encoding of parentheses because facebook (and possibly others)\n * and some markdown processors don't like raw parentheses in URLs.\n * Also replaces spaces with '+' for beauty.\n * @param s\n * @returns {string}\n */\nfunction encode (s) {\n  // md parser ambiguity compat\n  const parens = {\n    '(': '%28',\n    ')': '%29',\n  }\n  return encodeURIComponent(s)\n    .replace(/[()]/g, c => parens[c])\n    .replace(/%20/g, '+');\n}\nfunction decode (s) {\n  return decodeURIComponent(('' + s).replace(/\\+/g, ' '));\n}\n\nmodule.exports = { append, custom, decode, encode, grabView, sanitize, tpl, traverse, };\n", "\n'use strict';\n\nconst { append } = require('./html-util');\n\nclass EvalBox {\n  /**\n   * @desc  Create a visual container that can run SKI code step by step and display the results.\n   *\n   * @param {{\n   *      src: string,\n   *      engine: SKI,\n   *      generator?: function(e:Expr): IterableIterator<{final: boolean, expr: Expr, steps: number}>,\n   *      max?: number,\n   *      height?: number,\n   *      onStop?: function,\n   *      onStart?: function,\n   *      onStep?: function,\n   *      delay?: number,\n   *      id?: number,\n   *      parent?: Element,\n   * }} options\n   */\n  constructor (options={}) {\n    // logic setup\n    this.options    = options;\n    this.height     = options.height ?? 5;\n    this.running    = false;\n    this.delay      = options.delay ?? 0;\n    this.maxSteps   = options.max ?? Infinity;\n    this.onStart    = options.onStart ?? (() => {});\n    this.onStop     = options.onStop ?? (() => {});\n    this.onStep     = options.onStep ?? (() => {});\n    this.engine     = options.engine;\n    this.src        = options.src;\n    this.format     = options.format ?? { html: true };\n    this.generator  = options.generator ?? (e => e.walk());\n\n    // view setup\n    this.view = {};\n    this.view.parent  = options.parent;\n    this.view.scroll  = options.scroll ?? options.parent; // containing scrollable element, may != parent\n    this.view.main    = append(options.parent, 'div', { class: ['eval-box'] });\n  }\n\n  /**\n   *\n   * @param {string} [src] Set new source code to run\n   * @return EvalBox this\n   */\n  start(src){\n    if (this.running)\n      this.stop();\n    if (src !== undefined)\n      this.src = src;\n    try {\n      this.expr = typeof src === 'string'\n        ? this.engine.parse(src)\n        : src;\n      this.seq = this.generator(this.expr);\n    } catch (e) {\n      return this.stop(e.message);\n    }\n    this.onStart();\n    this.running = true;\n    this.tick();\n    return this;\n  }\n\n  stop (reason) {\n    this.running = false;\n    if (reason)\n      this.print(reason, { class: ['error'], line: '' });\n    this.onStop();\n  }\n\n  // TODO pause() / resume()\n\n  tick () {\n    if (!this.running) return;\n    const { value, done } = this.seq.next();\n    // we're checking both done and value.final because some SKI operations know when they end and some don't\n\n    if (value) {\n      this.print(value.expr.format(this.format),{line: value.steps});\n    }\n\n    this.onStep(value, done || value.final);\n\n    if (done || value.final) {\n      // could've just used next().done but that creates one extra iteration\n      // finished execution, congratulations\n      if (this.view.last)\n        this.view.last.classList.add('success');\n      return this.stop();\n    }\n\n    if (value.steps >= this.maxSteps)\n      return this.stop('Max steps reached: ' + this.maxSteps);\n    setTimeout(() => this.tick(), this.delay);\n  }\n\n  remove() {\n    if (this.view.parent) {\n      this.view.parent.removeChild(this.view.main);\n      this.view.parent = null;\n    }\n  }\n\n  setHeight (height) {\n    this.height = height;\n  }\n\n  print(text, options = {}) {\n    const line = append(this.view.main, 'div', options);\n    this.view.last = line;\n\n    if (options.raw)\n      line.innerHTML = text;\n    else {\n      append(line, 'span', {class: ['line-number'], content: options.line});\n      append(line, 'span', {\n        class: options.class ?? ['line-text'],\n        color: options.color,\n        content: (text),\n      });\n\n      while (this.view.main.children.length > this.height)\n        this.view.main.removeChild(this.view.main.firstChild);\n    }\n\n    if (this.view.scroll)\n      this.view.scroll.scrollTop = line.offsetTop;\n\n    return line;\n  }\n}\n\nmodule.exports = { EvalBox };", "'use strict';\nconst linkprefix = '#expr:';\n\nconst { encode, decode } = require('./html-util');\n\n/**\n * @desc   Creates a permalink for the given engine and code snippet.\n * @param {SKI} engine\n * @param {string} code\n * @returns {string}\n */\nfunction permalink (engine, code) {\n  // TODO tree shaking but LATER\n  return linkprefix + encode(code) + '?' + engine.declare()\n    .map(s => s.split('=').map(part => encode(part)).join('=')).join(';');\n}\n\n/**\n * @desc  Reads a permalink() hash and returns code and declarations.\n * @param hash\n * @returns {{code: string, decls: string[]}|null}\n */\nfunction readlink (hash) {\n  const match = hash.match(new RegExp('^' + linkprefix + '([^?]+)\\\\??(.*)$'));\n  if (!match) return null;\n  const expr = decode(match[1]);\n  const decls = match[2]\n    ? match[2].split(';').map(s => decode(s))\n    : [];\n  return { expr, decls };\n}\n\nfunction readOldLink(location) {\n// recover old style links via ?code=...&terms=...\n// via redirect to hash consumable by readlink()\n  const params = new URLSearchParams(location);\n  if (params.has('code') || params.has('terms')) {\n    const code = params.get('code') ?? '';\n    const terms = params.get('terms').split(',');\n    console.log(\"Migrating old-style link to new-style hash, code =\", code, \"terms =\", terms);\n    const reworkTerms = terms\n      .map(s => s.split(':').map(decodeURIComponent).join('='))\n      .join(';');\n    return '#expr:' + encodeURIComponent(code) + '?' + reworkTerms;\n  }\n}\n\nmodule.exports = { permalink, readlink, readOldLink, };", "class Store {\n  constructor (namespace) {\n    this.ns = namespace + ':';\n  }\n\n  save (key, value) {\n    window.localStorage.setItem(this.ns + key, JSON.stringify(value));\n  }\n\n  load (key) {\n    return JSON.parse(window.localStorage.getItem(this.ns + key));\n  }\n\n  scan () {\n    const st = window.localStorage;\n    const out = [];\n    for (let i = 0; i < st.length; i++) {\n      const key = st.key(i);\n      if (key.startsWith(this.ns))\n        out.push(key.substring(this.ns.length));\n    }\n    return out;\n  }\n\n  delete (key) {\n    window.localStorage.removeItem(this.ns + key);\n  }\n}\n\nmodule.exports = { Store };", "'use strict';\n\n/**\n *  @desc   A stupid state machine that can work in conjunction with persistent storage\n *          to maintain a consistent state of controls and switches.\n *\n */\nclass SMCtl {\n  // State machine toggle for menus and such\n  constructor(options = {}) {\n    this.onchange = [];\n    this.check = options.check ?? (any => true);\n    if (options.onchange)\n      this.onchange.push(options.onchange);\n    if (options.storage) {\n      const [engine, key] = options.storage;\n      this.save = () => engine.save(key, this.value);\n      this.load = () => this.set(engine.load(key) ?? options.default, true);\n    } else {\n      this.save = () => {};\n      this.load = () => { this.set( options.default ); };\n    }\n    this.load(); // set without saving\n  }\n\n  set(value, nosave=false) {\n    if (!this.check(value))\n      throw new Error('SMCtl: invalid value ' + value);\n    for (const cb of this.onchange)\n      cb(value, this.value);\n    this.value = value;\n    if (!nosave)\n      this.save(value);\n  }\n\n  get() {\n    return this.value;\n  }\n\n  addAction(cb) {\n    this.onchange.push(cb);\n  }\n}\n\nmodule.exports = { SMCtl };", "'use strict';\n\nconst { append } = require('./html-util');\n\nlet currentHamburger = null;\n\nclass Hamburger {\n  constructor (button, options = {}) {\n    this.button = button;\n    button.classList.add('hamburger-button');\n    this.parent = button.parentElement;\n    this.hidden = true;\n    this.content = append(this.parent, 'ul', { class: options.right ? ['hamburger', 'hamburger-right'] : ['hamburger'] });\n    this.button.addEventListener('click', () => this.toggle());\n  }\n\n  appendLi () {\n    return append(this.content, 'li');\n  }\n\n  addSeparator () {\n    const li = this.appendLi();\n    li.classList.add('hamburger-separator');\n    return this; // for chaining\n  }\n\n  addLabel (label) {\n    const li = this.appendLi();\n    append(li, 'span', { content: label });\n    return this; // for chaining\n  }\n\n  addLink (label, href, target) {\n    if (target === '_blank')\n      label = label + ' ' + '&#x1F517;';\n\n    const li = this.appendLi();\n    const link = append(li, 'a', { content: label });\n    link.href = href;\n    link.target = target;\n    link.onclick = () => this.hide();\n    return this; // for chaining\n  }\n\n  addAction (label, action) {\n    const li = this.appendLi();\n    const link = append(li, 'a', { content: label });\n    link.onclick = () => {\n      action();\n      this.hide();\n    };\n    return this; // for chaining\n  }\n\n  /**\n   * A sticky options choice\n   * @param label\n   * @param action\n   * @param choices\n   * @return {Hamburger}\n   */\n  addChoice (label, smctl, choices ) {\n    const li = this.appendLi();\n    append(li, 'span', { content: label });\n    const buttons = {}; // option value -> element\n    for (const entry of choices) {\n      const value = Array.isArray(entry) ? entry[1] : entry;\n      const display = Array.isArray(entry) ? entry[0] : entry;\n      const button = append(li, 'a', { content: display, class: ['hamburger-choice'] });\n      buttons[value] = button;\n      button.onclick = () => {\n        smctl.set(value);\n        this.hide();\n      };\n    }\n    const action = (val, old) => {\n      if (old !== undefined && buttons[old])\n        buttons[old].classList.remove('hamburger-current');\n      if (buttons[val])\n        buttons[val].classList.add('hamburger-current');\n    };\n    smctl.addAction(action);\n    action(smctl.get(), undefined);\n    return this; // for chaining\n  }\n\n  // flags: [ [label, callback, selected?], ... ]\n  addFlags(label, flags) {\n    const state = {};\n    const li = this.appendLi();\n    append(li, 'span', { content: label });\n    for (const [label, smctl] of flags) {\n      const button = append(li, 'a', { content: label, class: ['hamburger-choice'] });\n      button.onclick = () => {\n        smctl.set(!smctl.get());\n        this.hide();\n      };\n      const action = (val, old) => {\n        button.classList.toggle('hamburger-current', val);\n      };\n      smctl.addAction(action);\n      action(smctl.get());\n    }\n    return this; // for chaining\n  }\n\n  hide () {\n    if (currentHamburger === this)\n      currentHamburger = null;\n    this.hidden = true;\n    this.content.style.display = 'none';\n    return false;\n  }\n\n  show () {\n    if(currentHamburger)\n      currentHamburger.hide();\n    currentHamburger = this;\n    this.hidden = false;\n    this.content.style.display = 'block';\n    // TODO close on outside click or escape\n    return false;\n  }\n\n  toggle () {\n    this.hidden ? this.show() : this.hide();\n    return false;\n  }\n}\n\nmodule.exports = { Hamburger };", "/**\n *   This file is included from a static HTML page.\n *   Assume that SKI engine is already loaded.\n *   Make utility functions available in the HTML context.\n */\n\n'use strict';\n\nconst util = require ('./html-util');\nconst { EvalBox } = require ('./eval-box');\nconst { permalink, readlink, readOldLink } = require ('./permalink');\nconst { Store } = require ('./store');\nconst { SMCtl } = require('./smctl');\nconst { Hamburger } = require('./hamburger');\n\n// Expose classes to global context\nwindow.SMCtl       = SMCtl;\nwindow.Hamburger   = Hamburger;\nwindow.EvalBox     = EvalBox;\nwindow.Store       = Store;\n\n// append is used so much that it's worth being global\nwindow.append      = util.append;\n\n// namespace all other utilities\nwindow.util = {\n  ...util,\n  permalink,\n  readlink,\n  readOldLink,\n};\n"],
  "mappings": "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",
  "names": ["require_html_util", "__commonJSMin", "exports", "module", "grabView", "ids", "view", "name", "append", "parent", "type", "options", "child", "traverse", "node", "func", "custom", "html", "gantry", "elem", "out", "handle", "tpl", "script", "sanitize", "text", "escape", "c", "encode", "parens", "decode", "require_eval_box", "__commonJSMin", "exports", "module", "append", "EvalBox", "options", "src", "reason", "value", "done", "height", "text", "line", "require_permalink", "__commonJSMin", "exports", "module", "linkprefix", "encode", "decode", "permalink", "engine", "code", "s", "part", "readlink", "hash", "match", "expr", "decls", "readOldLink", "location", "params", "terms", "reworkTerms", "require_store", "__commonJSMin", "exports", "module", "Store", "namespace", "key", "value", "st", "out", "i", "require_smctl", "__commonJSMin", "exports", "module", "SMCtl", "options", "any", "engine", "key", "value", "nosave", "cb", "require_hamburger", "__commonJSMin", "exports", "module", "append", "currentHamburger", "Hamburger", "button", "options", "label", "li", "href", "target", "link", "action", "smctl", "choices", "buttons", "entry", "value", "display", "val", "old", "flags", "state", "util", "EvalBox", "permalink", "readlink", "readOldLink", "Store", "SMCtl", "Hamburger"]
}
